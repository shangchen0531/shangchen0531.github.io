(this["webpackJsonpsugar-lounge"]=this["webpackJsonpsugar-lounge"]||[]).push([[0],{125:function(e,t,n){},126:function(e,t,n){},136:function(e,t){},137:function(e,t){},144:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(33),s=n.n(o),r=(n(125),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,157)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))}),i=n(13),l=(n(126),n(31)),u=n(39),d=n(82),h=n(81),f=n(50),j=n(7),b=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={data:a.props.data},a}return Object(u.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("aside",{className:"side-bar",children:[Object(j.jsx)("header",{children:Object(j.jsx)("span",{children:"\u4e2a\u4eba\u6570\u636e\u5206\u6790"})}),Object(j.jsx)("nav",{children:Object(j.jsx)("ul",{className:"side-nav",children:this.state.data.map((function(e){return Object(j.jsx)(f.b,{to:e.path,activeClassName:"side-item-hover",children:Object(j.jsx)("li",{className:"side-item",children:e.title})},e.title)}))})}),Object(j.jsx)("footer",{children:Object(j.jsx)("span",{children:"\u53ef\u4ee5\u4e0a\u4f20\u5c0f\u578b\u8868\u683c\u8fdb\u884c\u5206\u6790"})})]})}}]),n}(c.a.Component),p=n(12),v=n.p+"static/media/adds.451e3f86.svg",m=c.a.createContext(),g=n(88),O=n.n(g);var x=function(){var e=Object(p.f)(),t=Object(a.useRef)(null),n=Object(a.useContext)(m),c=n.showAlert;function o(t){new Promise((function(e,n){var a=new FileReader;a.onload=function(t){var n=t.target.result,a=O.a.read(n,{type:"binary"}),c=[];a.SheetNames.forEach((function(e,t){var n=O.a.utils.sheet_to_json(a.Sheets[e],{header:1});0!==t&&n.shift(),console.log(n),c=c.concat(n)})),e(c)},a.onerror=function(){n("\u8bfb\u53d6\u5931\u8d25")},a.readAsBinaryString(t)})).then((function(t){var a=-1,o=-1;t.forEach((function(e){o=e.length,a=Math.max(o,a)})),t.forEach((function(e){for(;e.length<a;)e.push("")})),n.setColHidden([]),n.setRowChosen([]),n.setSettledData([]),n.setPrimitive(t),console.log("\u8868\u683c\u6570\u636e: ",t),c("\u8bfb\u53d6\u6570\u636e\u5b8c\u6bd5","success"),e.replace("/ali-table")})).catch((function(e){console.log(e)}))}return Object(a.useEffect)((function(){function e(e){e.stopPropagation(),e.preventDefault()}function n(e){e.stopPropagation(),e.preventDefault()}function a(e){e.stopPropagation(),e.preventDefault();for(var t=e.dataTransfer.files,n=0;n<t.length;n++){o(t[n]);break}}var c=t.current;return c.addEventListener("dragenter",e),c.addEventListener("dragover",n),c.addEventListener("drop",a),function(){c.removeEventListener("dragenter",e),c.removeEventListener("dragover",n),c.removeEventListener("drop",a)}})),Object(j.jsxs)("div",{className:"uploader",ref:t,onClick:function(){var e=document.getElementById("fileInput");e&&e.click()},children:[Object(j.jsxs)("div",{className:"uploader-content",children:[Object(j.jsx)("span",{children:"\u4e0a\u4f20\u4f60\u7684\u6587\u4ef6, \u53ef\u62d6\u66f3\u6587\u4ef6\u5230\u6b64(\u4ec5\u652f\u6301.xls, .xlsx, .csv)"}),Object(j.jsx)("img",{src:v,alt:"adds",className:"add_icon"})]}),Object(j.jsx)("input",{type:"file",id:"fileInput",onChange:function(e){return function(e){console.log(e);for(var t=0;t<e.length;t++){o(e[t]);break}}(e.target.files)}})]})},y=n(89),C=n(1),w=n(119),S=n(156),E=n(154),_=n(155),k=n(153),N=n(14);var P=function(e){var t=e.columns,n=e.setColHidden;return Object(j.jsxs)("div",{className:"alitable_multisele_cols",children:[t.map((function(e,t){return Object(j.jsxs)("div",{className:"alitable_multisele_cols_cell",children:[Object(j.jsx)("div",{children:Object(j.jsx)(E.a,{defaultChecked:e.hidden,onChange:function(){n((function(e){var n=Object(N.a)(e);return n[t]=1-n[t],n}))}})}),Object(j.jsx)("div",{style:{paddingLeft:5},children:""===e.name?"(\u65e0\u6807\u9898)":e.name})]},t)})),t.length>0?Object(j.jsx)("span",{style:{color:"hsl(12, 100%, 65%)",fontWeight:"bold"},children:"\u9009\u4e2d\u7684\u884c\u548c\u5217\u5c06\u4e0d\u8fdb\u884c\u6570\u636e\u5904\u7406"}):null]})};var D=function(){var e=Object(a.useContext)(m),t=e.showAlert,n=e.setSettledData,c=e.col_hidden,o=e.setColHidden,s=e.row_chosen,r=e.setRowChosen,l=e.primitiveData,u=void 0!==l,d=Object(a.useState)([]),h=Object(i.a)(d,2),f=h[0],b=h[1];Object(a.useEffect)((function(){u?0!==c.length&&0!==s.length||(o(l[0].map((function(){return 0}))),r(l.map((function(){return 0})))):(o([]),r([]))}),[u]),Object(a.useEffect)((function(){var e=[];s.forEach((function(t,n){1===t&&e.push(n+"")})),b(e),console.log("\u9ed8\u8ba4\u884c\uff1a ",e)}),[s]);var v,g,O=Object(p.f)(),x=function(e){var t={dataSource:[],columns:[]};if(void 0===e)return t;for(var n=0;n<e.length;n++){var a=e[n];if(0===n)a.forEach((function(e,n){t.columns.push({name:""===e?"(\u65e0\u6807\u9898)":e,code:"col"+n,hidden:1===c[n]})}));else{for(var o={},s=0;s<a.length;s++)o["col"+s]=void 0===a[s]?null:a[s];t.dataSource.push(o)}}return t}(l);v=u?x.dataSource:[],g=u?x.columns:[];var N=Object(C.r)({components:{Checkbox:E.a}}).input({dataSource:v,columns:g}).primaryKey("id").use(w.a.multiSelect({highlightRowWhenSelected:!0,defaultValue:f,checkboxPlacement:"start",checkboxColumn:{lock:!0},clickArea:"cell",onChange:function(e,t,n,a){var c,o=0;"check-all"===a||"uncheck-all"===a?(o="check-all"===a?1:0,r((function(e){return c=e.map((function(){return o}))}))):r((function(t){return c=t.map((function(){return 0})),e.forEach((function(e){c[parseInt(e)]=1})),console.log(c),c}))}}));return Object(j.jsxs)("div",{className:"table_container",children:[Object(j.jsx)(_.a,{title:"\u5206\u6790\u6570\u636e",placement:"bottom",children:Object(j.jsx)(k.a,{type:"ghost",shape:"circle",icon:Object(j.jsx)(S.a,{}),className:"ali_table_send_button",onClick:function(e){(function(){var e=c,t=s,n=l;function a(e){var t=typeof e;return"number"===t||"string"===t&&!isNaN(Number(e))}return new Promise((function(c,o){if(void 0!==n){var s=[];if(n.forEach((function(n,a){if(0===a||0===t[a-1]){for(var c=[],o=0;o<n.length;o++)0===e[o]&&c.push(n[o]);s.push(c)}})),s.length<=1)o({mes:"\u5408\u6cd5\u6570\u636e\u8fc7\u5c11\uff0c\u9700\u8981\u4e00\u5217\u975e\u6570\u503c\u6570\u636e\u4e0e\u81f3\u5c11\u4e00\u884c\u8bb0\u5f55",type:"warning"});else{for(var r=[],i=s[1],l=0;l<i.length;l++)if(!a(i[l])&&(r.push(l),r.length>1))return void o({mes:"\u5b58\u5728\u4e24\u5217\u4ee5\u4e0a\u975e\u6570\u636e",type:"warning"});var u=r[0];0!==u&&s.forEach((function(e){var t=[e[0],e[u]];e[u]=t[0],e[0]=t[1]}));var d,h,f,j,b=new Map;b.set("\u65e0\u6807\u9898",0),s[0].forEach((function(e,t){j=""===e?"\u65e0\u6807\u9898":e,b.has(j)?(d=b.get(j),h=d+1,b.set(j,h),f=j+h,s[0][t]=f):b.set(j,0)})),c(s)}}else o({mes:"\u6ca1\u6709\u6570\u636e",type:"error"})}))})().then((function(e){n(e),console.log("\u6574\u7406\u540e: ",e),O.replace("/data")})).catch((function(e){t(e.mes,e.type)}))}})}),Object(j.jsx)(P,{className:"ali_table_colmulsele_bar",columns:g,colHidden:c,setColHidden:o}),Object(j.jsx)(C.a,Object(y.a)(Object(y.a)({className:"ali_table"},N.getProps()),{},{defaultColumnWidth:50}))]})},I=n(117),A=n(80);var L=function(){var e=Object(a.useContext)(m).settledData,t=Object(a.useRef)(null),n={title:{text:e.length>0?"".concat(e.length-1,"\u9879"):""},legend:{type:"scroll",formatter:function(t){if(e.length>0){for(var n=e[0].indexOf(t),a=0,c=e.length,o=1;o<c;o++)a+=e[o][n];return t+"\n\u5747: ".concat((a/(c-1)).toFixed(2))}return t},padding:10},dataset:{source:[]},xAxis:{type:"category",alignWithLabel:!0},yAxis:{gridIndex:0},tooltip:{showContent:!0,trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderWidth:0,textStyle:{color:"#fff",fontWeight:"normal"}},toolbox:{show:e.length>0,feature:{dataZoom:{yAxisIndex:"none",title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},dataView:{lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"],readOnly:!1},magicType:{type:["bar","line","stack"],title:{bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"},option:{line:{smooth:!0,emphasis:{focus:"series"}},bar:{emphasis:{focus:"series"}}}},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247"}}},series:[]};return Object(a.useEffect)((function(){var n=[];if(e.length>1)for(var a=1;a<e[0].length;a++)n.push({type:"bar",emphasis:{focus:"series"}});t.getEchartsInstance().setOption({dataset:{source:e},toolbox:{show:e.length>0},series:n})})),Object(j.jsx)(I.a,{echarts:A,option:n,className:"page",ref:function(e){t=e},style:{height:"90vh",width:"70vw"}})},R=n(151),F=[{title:"\u4e0a\u4f20\u6587\u4ef6",path:"/uploader",component:Object(j.jsx)(x,{})},{title:"\u8868\u683c\u9884\u89c8",path:"/ali-table",component:Object(j.jsx)(D,{})},{title:"\u6570\u636e\u5206\u6790",path:"/data",component:Object(j.jsx)(L,{})}];var H=function(){var e="15vw",t=Object(a.useState)(),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)("\u672a\u77e5\u9519\u8bef"),r=Object(i.a)(s,2),l=r[0],u=r[1],d=Object(a.useState)(e),h=Object(i.a)(d,2),v=h[0],g=h[1],O=Object(a.useState)("error"),y=Object(i.a)(O,2),C=y[0],w=y[1],S=Object(a.useState)(0),E=Object(i.a)(S,2),_=E[0],k=E[1],N=Object(a.useState)([]),P=Object(i.a)(N,2),D=P[0],I=P[1],A=Object(a.useState)([]),L=Object(i.a)(A,2),H=L[0],W=L[1],T=Object(a.useState)([]),B=Object(i.a)(T,2),M=B[0],J=B[1];return Object(j.jsxs)("div",{className:"MyApp",children:[Object(j.jsx)(R.a,{message:l,type:C,showIcon:!0,className:"ali_table_alert",style:{left:v,opacity:_}}),Object(j.jsxs)(f.a,{basename:"/shangchen0531.github.io",children:[Object(j.jsx)(b,{data:F}),Object(j.jsx)(m.Provider,{value:{primitiveData:c,setPrimitive:o,showAlert:function(t,n){w(n),u(t),k(1),g("20vw"),setTimeout((function(){k(0),g(e)}),3e3)},settledData:D,setSettledData:I,col_hidden:H,setColHidden:W,row_chosen:M,setRowChosen:J},children:Object(j.jsx)("div",{className:"site-content",children:Object(j.jsxs)(p.c,{children:[F.map((function(e){return Object(j.jsx)(p.a,{path:e.path,children:e.component},e.path)})),Object(j.jsx)(p.a,{path:"/",children:Object(j.jsx)(x,{})})]})})})]})]})};s.a.render(Object(j.jsx)(f.a,{children:Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(H,{})})}),document.getElementById("root")),r()},99:function(e,t){}},[[144,1,2]]]);
//# sourceMappingURL=main.c1f6c7a7.chunk.js.map